---
layout: post
title: "Spring IoC & IoC Container"
description: "Spring IoC"
date: 2019-04-08
tags: [Spring]
comments: true
share: true
---

#### Spring IoC(Inversion of Control, 제어의 역전)
* 프로그램의 제어 흐름 구조가 바뀌는 것
* 사용자가 객체를 생성하고 소멸시키는 것이 컨테이너가 대신 하게 된다.(제어의 역전)
* 이 제어권이 스프링 컨테이너로 넘어가는 것이 Spring IoC이다.
* 스프링 IoC가 객체의 생성부터 생명주기 관리까지 모든 것을 맡아서 관리한다.
* 제어권이 컨테이너로 넘어감으로써 DI, AOP가 가능해졌다.
* 인스턴스의 생성부터 소멸까지의 객체(Bean) 생명주기를 컨테이너가 관리하게 된다.
* 내가(클래스, 사용자) 아닌 누군가 객체를 생성
* 제어가 역전되면 나는 객체가 어떻게 생성되고, 사용되는지 알 수 없다.
* 객체를 직접 생성하지 않고 인스턴스를 받아서 사용만 하는 구조로 개발을 해 놓으면 변경이 있을때 해당하는 부분의 클래스만 변경이 가능하다.
* 스프링에서 객체가 만들어지는 순서
    1. 객체 생성
    2. 의존성 객체 주입(스스로 만드는 것이 아니라 제어권을 가진 스프리에게 위임하여 스프링이 만들어 놓은 객체를 주입한다.)
    3. 의존성 객체 메소드 호출
* IoC 구현 방법 - DI, AOP
* IoC를 이용한 클래스 호출 방식 : 팩토리 패턴의 장점을 더해 어떠한 것에도 의존하지 않는 형태이다. 실행시점에 클래스간의 관계가 형성된다.

#### Bean
* 스프링에서 제어권을 가지고 직접 만들고 관계를 부여하는 객체
* 자바빈, EJB의 빈과 비슷한 오브젝트 단위의 애플리케이션 컴포넌트를 말한다.
* 스프링을 사용하는 애플리케이션에서 만들어지는 모든 객체는 빈이 아니다.
* 스프링의 빈은 스프링 컨테이너가 관리하는 객체를 가리킨다.

#### Spring IoC Container
* 컨테이너는 보통 인스턴스의 생명 주기를 관리하며, 생성된 인스턴스들에게 추가적인 기능을 제공하도록 한다.
* 작성한 코드의 처리과정을 위임받은 독립적인 존재이다.
* 적절한 설정만 되어 있다면 누구의 도움 없이도 프로그래머가 작성한 코드를 스스로 참조한 뒤 알아서 객체의 생성과 소멸을 컨트롤해준다.
* 스프링 컨테이너는 IoC를 이용해 애플리케이션을 구성하는 Bean/Component를 관리한다.
* 스프링 컨테이너 = IoC 컨테이너 = DI 컨테이너 같은 의미이다.
* 스프링 컨테이너는 두 종류가 있다.

##### Bean Factory
* DI의 기본사항을 제공하는 가장 단순한 컨테이너
* 팩토리 패턴을 구현한 것
* Bean을 생성하고 분배하는 책임을 지는 클래스
* Bean의 정의는 즉시 Loading하지만, 빈 인스턴스 생성은 Lazy Loading 한다.
* 처음으로 getBean()이 호출된 시점에서야 해당 빈을 생성한다.(Lazy Loading)

##### ApplicationContext
* BeanFactory 인터페이스를 상속 받은 하위 인터페이스다.
* 내부적으로 별도의 BeanFactory를 유지하고 있다.
* 즉시 인스턴스를 만든다.
* BeanFactory와 유사한 기능을 제공하지만 좀 더 많은 기능을 제공한다.
* 국제화가 지원되는 텍스트 메시지를 관리해준다.
* 이미지 같은 파일 자원을 로드할 수 있는 포괄적인 방법을 제공한다.
* Listener로 등록된 Bean에게 이벤트 발생을 알려준다.
* Context 초기화 시점에서 모든 싱글톤 Bean을 미리 로드한 후 애플리케이션을 기동한다.

#### 스프링을 사용하지 않을 때 일어날 수 있는 문제와 해결
* 객체의 생명 주기 문제 - DI로 해결
* 부품화 문제 - DI로 해결
* 기술 은닉과 부적절한 기술 은닉 문제 - AOP로 해결