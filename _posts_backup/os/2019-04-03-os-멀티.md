---
layout: post
title: "멀티 프로세스 & 멀티 쓰레드"
description: "멀티 프로세스 & 멀티 쓰레드"
date: 2019-04-03
tags: [운영체제, 프로세스, 쓰레드]
comments: true
share: true
---

* 멀티 프로세스와 멀티 쓰레드는 동시에 두 가지 이상의 루틴을 실행할 수 있는 역할을 하는 것은 동일하다.

#### Multi Process(멀티 프로세스)
* 부모 - 자식 관계라고 해도 자신만의 메모리 영역을 가지게 된다.
* 환경변수와 프로세스 핸들 테이블이 상속 가능할 뿐 결국 독립적인 관계이다.
* fork를 통해 프로세스를 복사한다.
* 프로세스 간으 통신을 하려면 IPC(Inter Process Communication; 세마포어, 큐, 공유 메모리)를 통해야 한다.

#### Multi Thread(멀티 쓰레드)
* 하나의 프로세스가 다수 개의 작업을 각각 스레드를 이용하여 동시에 작동시킬 수 있다.
* 쓰레드는 Code, Data, Heap 영역은 공유하고 Stack 영역은 별도로 가진다.

#### 멀티 쓰레드는 멀티 프로세스에 비해 상당한 이점을 가진다.
1. Context Switching(문맥 교환)시에 공유 메모리 만큼의 시간(자원) 손실이 줄어든다.
    * 프로세스 간의 문맥 교환시 단순한 CPU 레지스터 교체 뿐만이 아니라 RAM과 CPU 사이의 캐쉬메모리에 대한 데이터까지 초기화 되므로 상당한 부담이 발생한다.
    * 프로세스는 각각 독립된 메모리 영역이다 보니 캐쉬 메모리 초기화 등 꽤나 무거운 작업이 진행되고 오버헤드가 발생하게 된다.
2. Stack을 제외한 모든 메모리를 공유하기 때문에 Global, Static, new, Malloc에 의한 모든 자료를 공유할 수 있다.
    * 프로세스 통신과 같이 복잡한 과정을 거치지 않고 보다 효율적인 일처리가 가능하다.

#### 멀티 쓰레드의 효율성과 안정성 문제
* 여러 개의 쓰레드가 동일한 데이터 공간을 공유하면서 이들을 수정한다는 점에서 필연적으로 문제가 발생한다.
* 멀티 프로세스 방식의 프로그램에서 하나의 프로세스가 자신의 데이터 공간을 망가뜨린다면 그것은 해당 프로세스의 중단을 초래한다.
* 멀티 쓰레드 방식의 프로그램에서는 하나의 쓰레드가 자신이 사용하던 데이터 공간을 망가뜨린다면 그 결과는 하나의 데이터 공간을 공유하는 모든 쓰레드를 작동 불능의 상태로 만들어 버릴 것이다.

#### 멀티 쓰레드 장 & 단점
* 메모리 공유로 인한 시스템 자원 소모가 줄어든다.
* 응답 시간이 단축 된다.
* Context Switching에 대한 오버헤드가 줄어든다.
* 서로 데이터를 사용하다가 충돌할 가능성이 있다.
* 디버깅이 까다로워진다.(버그가 생성될 가능성이 증가한다.)