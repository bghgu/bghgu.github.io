---
layout: post
title:  "Micro Service Architecture"
date:   2020-01-09 23:32:00
author: bghgu
categories: ETC
tags: [ETC, MSA]
---

#### MSA(Micro Service Architecture)
* 모놀리식 아키텍처를 쪼개서 독립적으로 구분한다.
* 애플리케이션 로직을 각자 책임이 명확한 작은 컴포넌트들로 분해해서 이들을 조합해서 솔루션을 제공한다.
* 각 컴포넌트는 작은 책임 영역을 담당하고 완전히 상호 독립적으로 배포된다.
* 마이크로 서비스 비즈니스 영역의 한 부분에서만 책임을 담당한다.
* 여러 애플리케이션에서 재사용할 수 있어야 한다.
* 마이크로 서비스는 몇 가지 기본 원칙에 기반을 둔다.
* 서비스 소비자와 서비스 제공자 사이의 데이터 교환을 위한 HTTP와 JSON 같은 경량 통신 프로토콜을 사용한다.
* 애플리케이션은 항상 기술 중립적 프로토콜을 사용해 통신하므로 서비스 구현 기술과는 무관하다. 따라서 마이크로 서비스 기반의 애플리케이션을 다양한 언어와 기술로 구축할 수 있다.
* 작고 독립적이며 분산된 마이크로 서비스를 사용해 조직은 명확히 정의된 책임 영역을 담당하는 소규모 팀을 보유할 수 있다. 이 팀들은 애플리케이션 출시처럼 하나의 목표를 향해 일하지만, 자기가 개발하는 서비스만 책임지면 된다.
* 단일 서비스를 나누어 작은 서비스의 조합으로 구축하는 방식이다.
* 각 컴포넌트를 서비스라는 개념으로 정의한다.
* REST API와 같은 표준 인터페이스로 그 기능을 외부로 제공한다.
* 애플리케이션 로직을 분리해서 여러 개의 애플리케이션으로 나눠서 배포한다.
* 서비스간 의존성이 생겨난다.

#### Monolithic Architecture 모놀리식 아키텍처
* 모놀리식 아키텍처는 서비스의 모든 컴포넌트가 분리되지 않고 한 개의 서비스 안에서 동작한다.
* 각각의 컴포넌트는 강한 결합을 가지고 있는 전통적인 아키텍처이다.
* 빠르고 쉽게 서비스를 구성할 수 있어 적은 비용으로 서비스를 출시할 수 있다.
* 고객의 피드백을 빠르게 받아 볼 수 있다.
* 서비스의 규모가 커지면서 발생하는 한계가 존재한다.

#### 모놀리식 아키텍처의 한계
* 부분의 장애가 전체의 서비스 장애로 확대되는 문제가 있다.
* 부분적인 Scale-out을 하기 어렵다.
* 여러 컴포넌트가 하나의 서비스에 강결합 형태로 되어 있어 서비스의 변경이 매우 어렵고, 수정 시 장애 영향도를 파악하기 힘들다.
* 작은 변경에도 높은 수준의 테스트 비용이 발생한다.
* 조직(개발자/팀)이 성장할수록, 배포의 대기 시간이 비약적으로 증가한다.
* 빠르게 서비스가 성장하는 상황에서 서비스의 성장을 막는다.
* 개발 언어에 종속적이다.
* 선택적으로 확장할 수 없다.
* 하나의 서비스가 모든 서비스에 영향을 준다.

#### 왜 마이크로 서비스 아키텍처?
* 작은 서비스들로 나누고, 각 서비스를 독립적으로 만든다.
* 대용량 분산 환경에 적합하다.
* 단일 서비스에서 복잡도가 감소한다.
* 유연한 배포가 가능하다.
* 재사용성
* 확장성
* 서비스별 플랫폼 기술의 도입 및 확장이 자유롭다.
* 개발자가 이해하기 쉽고 개발/운영 매 단계의 생산성이 높다.
* 결함 감내가 높다.
* 애플리케이션의 빠른 성장이 가능하다.

#### 단점
* 장애추적, 모니터링이 어렵다.
* 여러 서비스에 결쳐져 있는 기능의 경우 트랜잭션 및 테스트가 어렵다.
* 의존성이 있는 경우 배포가 까다롭다.
* 지속적 통합, 배포가 어렵다.
* 모놀리식을 전환할 때 많이 어렵다.
* 의존성이 있는 서비스에서 장애가 발생할 시 장애가 위로 전파될 수 있다.
* 인스턴스 관리가 어렵다.

#### 참조
* popit.kr/why-microservice/
* https://www.popit.kr/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98-%EA%B7%B8%EA%B2%83%EC%9D%B4-%EB%AD%A3%EC%9D%B4-%EC%A4%91%ED%97%8C%EB%94%94/
* https://www.popit.kr/%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4%EB%8A%94-%EC%99%9C-%EC%A0%90%EC%A0%90-%EB%8D%94-%EA%B0%81%EA%B4%91%EC%9D%84-%EB%B0%9B%EC%9D%84-%EC%88%98-%EB%B0%96%EC%97%90-%EC%97%86/