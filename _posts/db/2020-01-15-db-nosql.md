---
layout: post
title:  "NoSQL"
date:   2020-01-15 14:53:00
author: bghgu
categories: Database
tags: [Database]
---

#### NoSQL
* Not Only SQL
* 관계형 모델을 사용하지 않으며 테이블간 조인 기능이 없다.
* 직접 프로그래밍을 하는 등의 비 SQL 인터페이스를 통한 데이터 엑세스
* 대부분 여러 대의 데이터베이스 서버를 묶어서(클러스터링) 하나의 데이터베이스를 구성한다.
* 관계형 데이터베이스에서는 지원하는 데이터 처리 완결성(트랜잭션 ACID)을 보장하지 않는다.
* 데이터의 스키마와 속성들을 다양하게 수용 및 동적 정의(Schema-less)
* 데이터베이스의 중단 없는 서비스와 자동 복구 기능 지원
* 다수가 오픈소스로 제공한다.
* 확장성, 가용성, 높은 성능
* 초 고용량 데이터 처리 등 성능에 특화된 목적을 위해, 비 관계형 데이터 저장소에 비 구조적인 데이터를 저장하기 위한 분산 저장 시스템이다.
* NoSQL은 분산 환경에서 대용량의 데이터를 빠르게 처리하기 위해 개발되었다.
* 핵심은 수평 확장(Horizontal Scalability)과 고가용성(High Availability)이다.
* 가용성 : 서버와 네트워크, 프로그램 등의 정보 시스템이 정상적으로 사용 가능한 정도를 말한다.
* 구매 내역이나 게임 로그 등의 데이터는 엄청난 양이 생성되지만 수정될 일이 거의 없다.
* 이런 경우는 ACID 트랜잭션이 필요 없으며 scale-out 등이 중요하므로 NoSQL이 효과를 발휘한다.
* 페이스북이나 트위터 등의 게시글을 저장하는데 NoSQL이 사용된다. RDBMS보다 빠른 성능 때문이다.
* 각종 검색엔진에서도 NoSQL이 사용된다. 웹 페이지 내의 텍스트들을 형태소 단위의 토큰으로 분리하고 URL을 매핑하는 구조를 NoSQL을 통해 이룬다.
* 데이터의 일관성이 보장되어야 하고 여러번의 조인 연산이 필요하다면 단연 RDBMS를 고려해야 할 것이다.

#### 분류
* Key Value DB
    * 키와 값이 쌍으로 데이터가 저장되는 가장 단순한 형태의 솔루션이다.
    * AWS DynamoDB, Redis
* Wide Columnar Store
    * Big Table DB
* Document DB
    * JSON, XML과 같은 컬렉션 데이터 모델 구조를 채택했다.
    * MongoDB
* Graph DB
* 시계열 DB

#### 등장 배경
* 지난 20년간 데이터를 저장하는데에는 관계형 데이터베이스가 사용되었다.
* 트랜잭션을 통한 안정적인 데이터 관리가 가장 중요한 이슈였다.
* 하지만 웹 2.0 환경과 빅데이터가 등장하면서 데이터를 처리하는데 필요한 비용이 증가했다.
* 데이터와 트래픽의 양이 기하급수적으로 증가함에 따라 한 대에서 실행하도록 설계된 RDBMS를 사용하는 것은 하드웨어적으로 큰 비용이 들게 되었다.
* 장비의 성능이 좋을수록, 성능을 향상시키는 데(Scale-up : 수직적 확장) 비용이 기하급수적으로 증가하기 때문이다.
* NoSQL은 데이터의 일관성을 약간 포기하는 대신 여러 대의 컴퓨터에 데이터를 분산 저장하는 것(Scale-out : 수평적 확장)을 목표로 등장했다.
* NoSQL은 작고 값싼 장비 여러 대로 대량의 데이터와 컴퓨팅 부하를 처리하는 것이 가능하게 되었다.

#### 특징
1. 일관성과 확장성 사이의 Trade-off
2. 분산 저장
3. 데이터 일치
4. Schema-less

#### RDBMS의 한계
* 많은 데이터량과 데이터 처리량이 계속적으로 증가한다면 RDBMS는 아래와 같은 문제점을 만난다.
* 스키마 문제 : 빅데이터를 RDB의 스키마에 맞춰 변경해서 넣으려면 매우 긴 시간의 down time이 발생한다.
* 스케일 업의 한계 : RDBMS는 애초부터 스케일 아웃을 염두에 두고 설계되지 않았다. 관계 모델과 트랜잭션의 연산, 속성을 유지하면서 분산 환경(스케일 아웃)에서 RDBMS를 조작하는 것은 어렵다.

#### RDBMS & NoSQL

| 구분 | RDBMS                                                        | NoSQL                                                        |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 장점 | 정규화된 데이터 모델, 데이터 무결성/정합성 보장, 작은 크기의 트랜잭션 | Web, SNS 환경의 다양한 정보를 검색 및 저장                   |
| 단점 | 확정성의 한계, 클라우드 분산환경 부적합                      | 데이터 무결성/정합성 보장 못함                               |
| 특징 | 조인을 통해 정보 연계 가능, 트랜잭션의 안정성 확보를 위한 ACID, 정형적인 스키마 구조 | 데이터의 수정/삭제가 거의 없고 대부분 삽입 위주, 강한 Consistency 불필요, 노드 추가/삭제 데이터 분산에 유연 |